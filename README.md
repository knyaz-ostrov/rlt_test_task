# RLT Test Task
Агрегатор данных, извлекаемых из MongoDB в оболочке Телеграм-бота.
___
## Описание
Моей задачей в рамках этого тестового задания было написание алгоритма агрегации статистических данных о зарплатах сотрудников компании по временным промежуткам.
> [Коллекция со статистическими данными.](https://disk.yandex.ru/d/Bd2Hc0DO9qkppQ "Яндекс.Диск")

Алгоритм должен принимать на вход:
1. Дату и время старта агрегации в ISO формате (далее dt_from)
2. Дату и время окончания агрегации в ISO формате (далее dt_upto)
3. Тип агрегации (далее group_type). Типы агрегации могут быть следующие: hour, day, month. То есть группировка всех данных за час, день, месяц
* Пример входных данных:
```
{
"dt_from":"2022-09-01T00:00:00",
"dt_upto":"2022-12-31T23:59:00",
"group_type":"month"
}
```
> **Комментарий к входным данным:**
> 
> Вам необходимо агрегировать выплаты с 1 сентября 2022 года по 31 декабря 2022 года, тип агрегации по месяцу.

На выходе ваш алгоритм формирует ответ содержащий:
1. Агрегированный массив данных (далее dataset)
2. Подписи к значениям агрегированного массива данных в ISO формате (далее labels)
* Пример ответа:
```
{
"dataset": [5906586, 5515874, 5889803, 6092634],
"labels": ["2022-09-01T00:00:00", "2022-10-01T00:00:00", "2022-11-01T00:00:00", "2022-12-01T00:00:00"]
}
```
> **Комментарий к ответу:**
>
> В нулевом элементе датасета содержится сумма всех выплат за сентябрь, в первом элементе сумма всех выплат за октябрь и т.д. В лейблах подписи соответственно элементам датасета.

Телеграм-бот принимает от пользователей текстовые сообщения содержащие JSON с входными данными и отдает агрегированные данные в ответ.
___
> ## Установка (Windows)
У вас должны быть установлены [зависимости проекта](https://github.com/knyaz-ostrov/rlt_test_task#Зависимости)
1. Клонирование репозитория

    `git clone https://github.com/knyaz-ostrov/rlt_test_task.git`

2. Переход в директорию проекта TaskManager_tgbot

    `cd rlt_test_task`

3. Открыть файл конфигурации и внести все необходимые данные

    Путь: `data/data/config.json`
     
    > Рекомендую использовать редактор [Notepad++](https://notepad-plus-plus.org/ "Официальный сайт")

4. Создание виртуального окружения

    `py -m venv env`

5. Активация виртуального окружения

    * cmd -> `call env/Scripts/activate`
   
    * PowerShell -> `env/Scripts/activate`

6. Установка зависимостей

    `pip install -r requirements.txt`

7. Запуск бота

    `py Bot.py`
___
> ## Поддержка
По любым вопросам, проблемам или предложениям создайте [обсуждение](https://github.com/knyaz-ostrov/rlt_test_task/issues/new/choose) в данном репозитории или напишите мне в [Телеграм](https://t.me/knyaz_ostrov "t.me/knyaz_ostrov") или на почту <knyaz.ostrov@gmail.com>.
___
> ## Зависимости
Эта программа тестировалась на интерпретаторе [Python](https://www.python.org/ "Официальный сайт") версии 3.11.8, PIP 24.0, [MongoDB](https://www.mongodb.com/ "Официальный сайт") 7.0, системе контроля версий [Git](https://git-scm.com/downloads "Официальный сайт") 2.44.0.windows.1.
> ОС:
> 
> Выпуск	Windows 11 Pro
> 
> Версия	23H2

Если вы заметили, что данное ПО можно запустить на версии ниже, или оно не работает на какой-либо версии, то напишите в [поддержку](https://github.com/knyaz-ostrov/rlt_test_task#Поддержка).
___
> ## Функционал
Кроме стартовой, бот имеет три кастомные команды:
1. Добавить новую задачу

    `/add`

2. Показать список своих задач

    `/tsk`

3. Удалить свои задачи

    `/clr`
___
> ## Контакты для сотрудничества:
* ### Telegram: [t.me/knyaz_ostrov](https://t.me/knyaz_ostrov "https://t.me/knyaz_ostrov")
* ### Email: <knyaz.ostrov@gmail.com>
